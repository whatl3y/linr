#!/usr/bin/env node

!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){r(1),r(2),e.exports=r(3)},function(e,t){e.exports=require("core-js/stable")},function(e,t){e.exports=require("regenerator-runtime/runtime")},function(e,t,r){const n=r(4),o=r(5),s=r(8);function a(e,t="."){return(e instanceof Array?e:[e]).reduce((e,r)=>{const[n,o]=r.split(t);return{...e,[n.trim()]:(o||"").trim()}},{})}!async function(){try{const e=n(process.argv.slice(2)),t=e._[0]||e.url||e.u||"https://api.coinbase.com/v2/prices/BTC-USD/buy",r=e.request||e.X||"GET",i=e.header||e.H,u=e.p||e.params,c=e.b||e.body,l=e.key||e.k||"",p=e.delay||e.d||100;let d={};i&&(d=a(i,":"));let f=null;u&&(f=a(u,"="));let h=null;c&&(h=JSON.parse(c));const y=o(),b=s({url:t,headers:d});for(y.init();;){const e=await b.getAndParse({method:r,body:h,params:f},l);y.push(parseFloat(e)),y.draw(`linr - line chart generator (Ctrl+C to exit)\n\n${t}\nlatest value: ${e}`),await b.sleep(p)}}catch(e){console.error("Uh oh, something bad happened, closing linr",e),process.exit()}}()},function(e,t){e.exports=require("minimist")},function(e,t,r){const n=r(6),o=r(7);e.exports=function(){return{data:[],init(){console.clear()},pushAndRedraw(e,t=null){this.push(e),this.draw(t)},push(e){return this.data.push(e),this.data=this.data.slice(-100)},draw(e=null){o.clearLine(process.stdout,0),e&&(o.cursorTo(process.stdout,0,1),process.stdout.write(e)),o.cursorTo(process.stdout,0,6),process.stdout.write(n.plot(this.data,{height:Math.floor(process.stdout.rows-.2*process.stdout.rows)}))}}}},function(e,t){e.exports=require("asciichart")},function(e,t){e.exports=require("readline")},function(e,t,r){const n=r(9);e.exports=function({url:e,headers:t={}}){return{client:n.create({baseURL:e,headers:t,responseType:"text"}),async request({method:e="get",params:t=null,body:r=null}){return await this.exponentialBackoff(async()=>await this.client({method:e,params:t,body:r}),()=>{})},async getAndParse(e,t=null){const{data:r}=await this.request(e);return t?t.split(".").reduce((e,t)=>e[t],r):r},sleep:async e=>await new Promise(t=>setTimeout(t,parseInt(e))),async exponentialBackoff(e,t=NOOP,r=null,n=10,o=1){const s=2+Math.pow(o,2);if(o>n)throw r;try{return await e()}catch(r){return t(r,o),await this.sleep(1e3*s),await this.exponentialBackoff(e,t,r,n,o+1)}}}}},function(e,t){e.exports=require("axios")}]);